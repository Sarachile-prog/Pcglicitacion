
{
  "entities": {
    "Bid": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Bid",
      "type": "object",
      "description": "Represents a public tender or bid opportunity scraped from various government and institutional websites. It includes key information extracted and summarized from bid documents.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Bid entity."
        },
        "title": {
          "type": "string",
          "description": "The official title or name of the bid opportunity."
        },
        "description": {
          "type": "string",
          "description": "A summarized description of the bid's purpose and scope, often enriched by AI extraction."
        },
        "publicationDate": {
          "type": "string",
          "description": "The date and time when the bid was officially published or announced.",
          "format": "date-time"
        },
        "deadlineDate": {
          "type": "string",
          "description": "The final date and time for interested parties to submit their proposals or bids.",
          "format": "date-time"
        },
        "amount": {
          "type": "number",
          "description": "The estimated or actual monetary value associated with the bid, if specified."
        },
        "currency": {
          "type": "string",
          "description": "The currency code for the bid's amount (e.g., 'USD', 'CLP', 'EUR')."
        },
        "status": {
          "type": "string",
          "description": "The current state or phase of the bid (e.g., 'Open', 'Closed', 'Awarded', 'Canceled')."
        },
        "sourceUrl": {
          "type": "string",
          "description": "The original URL of the webpage or document from which the bid information was scraped.",
          "format": "uri"
        },
        "categoryId": {
          "type": "string",
          "description": "Reference to the Category entity that classifies this bid. (Relationship: Category 1:N Bid)"
        },
        "issuingGovernmentEntityName": {
          "type": "string",
          "description": "The name of the government agency or institutional body that issued the bid."
        },
        "extractedKeyDetails": {
          "type": "string",
          "description": "Additional summarized key requirements, conditions, or relevant details extracted from the bid documents, potentially in a structured format like JSON string."
        },
        "scrapedAt": {
          "type": "string",
          "description": "The timestamp indicating when this bid record was last scraped or updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "description",
        "publicationDate",
        "deadlineDate",
        "status",
        "sourceUrl",
        "categoryId",
        "issuingGovernmentEntityName",
        "scrapedAt"
      ]
    },
    "Bookmark": {
      "title": "Bookmark",
      "type": "object",
      "description": "A bid that a user has decided to follow or save for later review.",
      "properties": {
        "bidId": { "type": "string" },
        "title": { "type": "string" },
        "entity": { "type": "string" },
        "status": { "type": "string" },
        "savedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["bidId", "title", "savedAt"]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Defines a classification category or industry sector used to organize and filter bid opportunities.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Category entity."
        },
        "name": {
          "type": "string",
          "description": "The human-readable name of the category (e.g., 'Construcción', 'Tecnología', 'Servicios de Consultoría')."
        },
        "description": {
          "type": "string",
          "description": "A brief explanation or scope of the category."
        }
      },
      "required": [
        "id",
        "name",
        "description"
      ]
    },
    "Company": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Company",
      "type": "object",
      "description": "Represents a company or organization that has been identified as participating in or related to bid opportunities, intended for outreach purposes.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Company entity."
        },
        "name": {
          "type": "string",
          "description": "The official registered name of the company."
        },
        "taxId": {
          "type": "string",
          "description": "The company's tax identification number (e.g., RUC in some countries, TIN, VAT ID)."
        },
        "address": {
          "type": "string",
          "description": "The primary physical address of the company."
        },
        "website": {
          "type": "string",
          "description": "The official website URL of the company.",
          "format": "uri"
        },
        "identifiedFromBidIds": {
          "type": "array",
          "description": "An array of Bid IDs where this company was identified as participating, mentioned, or relevant. (Relationship: Company N:N Bid)",
          "items": {
            "type": "string"
          }
        },
        "lastIdentifiedAt": {
          "type": "string",
          "description": "The timestamp indicating when this company record was last identified or updated through scraping.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "lastIdentifiedAt"
      ]
    },
    "ContactEmail": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ContactEmail",
      "type": "object",
      "description": "Stores individual email addresses associated with companies, primarily for sending invitations to use the PCGLICITACIÓN app.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ContactEmail entity."
        },
        "emailAddress": {
          "type": "string",
          "description": "The email address identified for contact.",
          "format": "email"
        },
        "companyId": {
          "type": "string",
          "description": "Reference to the Company entity that this email address belongs to. (Relationship: Company 1:N ContactEmail)"
        },
        "contactPersonName": {
          "type": "string",
          "description": "The name of the individual associated with this email address, if known."
        },
        "sourceDescription": {
          "type": "string",
          "description": "A description of how and where this email address was identified (e.g., 'Contact page on company website', 'Bid document XYZ')."
        },
        "isInvitationSent": {
          "type": "boolean",
          "description": "A flag indicating whether an invitation email to use the PCGLICITACIÓN app has been sent to this address."
        },
        "invitationSentDate": {
          "type": "string",
          "description": "The date and time when the invitation email was sent, if 'isInvitationSent' is true.",
          "format": "date-time"
        },
        "firstIdentifiedAt": {
          "type": "string",
          "description": "The timestamp indicating when this email record was first identified through scraping.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "emailAddress",
        "companyId",
        "isInvitationSent",
        "firstIdentifiedAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/bids/{bidId}",
        "definition": {
          "entityName": "Bid",
          "schema": {
            "$ref": "#/backend/entities/Bid"
          },
          "description": "Stores public tender opportunities.",
          "params": [
            {
              "name": "bidId",
              "description": "Unique identifier for a specific bid opportunity."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/bookmarks/{bidId}",
        "definition": {
          "entityName": "Bookmark",
          "schema": {
            "$ref": "#/backend/entities/Bookmark"
          },
          "description": "User's followed bids.",
          "params": [
            { "name": "userId", "description": "Auth UID" },
            { "name": "bidId", "description": "Bid ID" }
          ]
        }
      }
    ]
  }
}
